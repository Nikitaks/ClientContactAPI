# Тестовое задание по созданию API базы данных
---

Спроектировать простую БД, обеспечивающую хранение информации о клиентах и их контактной информации.
Каждый клиент характеризуется именем.
Каждому клиенту в соответствие может быть поставлена информация о его контактах: 0 и более телефонных номеров, 0 и более адресов электронной почты.
Разработать в Spring Framework API, обеспечивающее работу с данной БД.
API должно обеспечивать следующие функции:
1. Добавление нового клиента
2. Добавление нового контакта клиента (телефон или email)
3. Получение списка клиентов
4. Получение информации по заданному клиенту (по id)
5. Получение списка контактов заданного клиента
6. Получение списка контактов заданного типа заданного клиента

Реализованный проект с описанием эндпоинтов разаработанного API выложить на GIT и предоставить ссылку.

#### Используемые инструменты:
1. Spring Boot.
2. СУБД H2.
3. Spring Data JPA, Hibernate.
4. Swagger.
5. Сборщик проектов `maven`.
6. Lombok
7. MapStruct

#### Особенности проекта
1. Проект содержит скрипт инициализации БД и скрипт для заполнения тестовыми данными.(`src/main/resources/schema.sql`, `src/main/resources/data.sql`).
2. Проект содержит страницу с документацией Swagger-UI по адресу http://localhost:8080/swagger-ui/index.html
3. Проект содержит страницу с доступом к консоли базы дынных h2 http://localhost:8080/h2-console. Параметры входа:
   - Driver Class: org.h2.Driver
   - JDBC URL: jdbc:h2:mem:testdb
   - User Name: sa
   - поле Password оставить пустым
4. Схема БД:

```
+----------+------
| CLIENTS        |
+----------+------
| ID       | PRI |1----------|
| NAME     |     |           |
+----------+-----|           |
                             |
+-----------------+------    |
| CONTACTS              |    |
+-----------------+------    |
| ID              | PRI |    |
| CLIENT_ID       | FK  |*---|
| CONTACT_TYPE_ID | FK  |*------|
| CONTACT         |     |       |
+-----------------+------       |
                                |
+--------------+------          |
| CONTACT_TYPES      |          |
+--------------+------          |
| ID           | PRI |1---------|
| CONTACT_TYPE |     |
+--------------+-----|



 ```
#### Описание эндпоинтов

```
--------------------------------------------------
POST /clients
Добавление нового клиента

Тело запроса: JSON, содержащий имя клиента
Схема:
{
  "name": "string"
}

Отклики:
201: Сообщение об успешном добавлении
400: Ошибка проверки входных данных
Схема:
{
  "message": "string"
}
--------------------------------------------------
POST /contacts
Добавление нового контакта клиента

Тело запроса: JSON, содержащий Id клиента, тип контакта(EMAIL или TELEPHONE) и сам контакт
Схема:
{
  "clientId": 0,
  "contactType": "EMAIL",
  "contact": "string"
}

Отклики:
201: Сообщение об успешном добавлении
400: Причина невозможности добавления
Схема:
{
  "message": "string"
}
--------------------------------------------------
GET /clients
Получение списка клиентов

Параметры: без параметров

Отклики:
200: Список клиентов
Схема:
[
  {
    "name": "string"
  }
]
--------------------------------------------------
GET /clients/{clientId}
Получение информации по заданному клиенту (по id)

Параметры:
clientId: integer (path), Id клиента

Отклики:
200: Объект со всеми данными по клиенту
Схема:
{
  "name": "string",
  "contactsList": [
    {
      "contact": "string",
      "contactType": "EMAIL"
    }
  ]
}
400: Сообщение с причиной невозможности получения информации
Схема:
{
  "message": "string"
}
--------------------------------------------------
GET /contacts/{clientId}
Получение списка контактов заданного клиента

Параметры:
clientId: integer (path), Id клиента

Отклики:
200: Список контактов
Схема:
[
  {
    "contact": "string",
    "contactType": "EMAIL"
  }
]
400: Сообщение с причиной невозможности получения списка
Схема:
{
  "message": "string"
}
--------------------------------------------------
GET /contacts/{clientId}?contactType={contactType}
Получение списка контактов заданного типа заданного клиента

Параметры:
clientId: integer (path), Id клиента
contactType: (EMAIL | TELEPHONE) (query), тип контакта

200: Список контактов
Схема:
[
  {
    "contact": "string",
    "contactType": "EMAIL"
  }
]
400: Сообщение с причиной невозможности получения списка
Схема:
{
  "message": "string"
}
--------------------------------------------------
```

#### Как запустить проект

1. Импортировать maven-проект в IDE.
2. Убедиться, что установленная JDK не ниже 8.181
3. Собрать проект выполнием команды `mvn clean compile`;
4. Запустить на исполнение приложение ClientContactAPIApplication.java
5. Перейти на страницу с документацией localhost:8080/swagger-ui/index.html с локального компьютера.
